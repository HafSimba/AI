<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Modalit√† Programmatore - Amico Virtuale AI</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: #1a1a2e;
            color: white;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .test-section {
            background: #16213e;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            border: 1px solid #2a3f5f;
        }
        
        .test-button {
            background: #2ecc71;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 10px 5px;
            font-size: 14px;
            transition: background 0.3s;
        }
        
        .test-button:hover {
            background: #27ae60;
        }
        
        .results {
            background: #0f1419;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border: 1px solid #2a3f5f;
            min-height: 100px;
            overflow-x: auto;
        }
        
        h1 {
            text-align: center;
            color: #2ecc71;
            margin-bottom: 30px;
        }
        
        h2 {
            color: #3498db;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
        }
        
        .command-input {
            width: 100%;
            padding: 10px;
            background: #0f1419;
            border: 1px solid #2a3f5f;
            border-radius: 6px;
            color: white;
            font-size: 14px;
            margin: 10px 0;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        }
        
        .preview-area {
            background: #1a1a2e;
            border: 2px solid #2ecc71;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        /* Importa gli stili per i code blocks */
        .code-block {
            background: #1e1e1e;
            border: 1px solid #404040;
            border-radius: 8px;
            margin: 15px 0;
            overflow: hidden;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            position: relative;
        }
        
        .code-block-header {
            background: #2d2d2d;
            color: #ffffff;
            padding: 8px 16px;
            font-size: 0.85em;
            font-weight: 500;
            border-bottom: 1px solid #404040;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .code-language {
            color: #9cdcfe;
            font-weight: 600;
        }
        
        .code-copy-btn {
            background: #404040;
            color: #ffffff;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.75em;
            transition: background 0.2s;
        }
        
        .code-copy-btn:hover {
            background: #505050;
        }
        
        .code-block pre {
            background: transparent;
            margin: 0;
            padding: 16px;
            overflow-x: auto;
            line-height: 1.4;
            color: #d4d4d4;
        }
        
        .template-code-block {
            background: linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 100%);
            border: 2px solid #2ecc71;
            box-shadow: 0 4px 8px rgba(46, 204, 113, 0.2);
        }
        
        .template-code-block .code-block-header {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            color: white;
        }
        
        .inline-code {
            background: rgba(175, 184, 193, 0.2);
            color: #e06c75;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.85em;
            border: 1px solid rgba(175, 184, 193, 0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üíª Test Modalit√† Programmatore</h1>
        
        <!-- Test Template -->
        <div class="test-section">
            <h2>üéØ Test Template Codice</h2>
            <p>Testa i template per diversi linguaggi di programmazione:</p>
            
            <button class="test-button" onclick="testTemplate('javascript')">JavaScript</button>
            <button class="test-button" onclick="testTemplate('python')">Python</button>
            <button class="test-button" onclick="testTemplate('java')">Java</button>
            <button class="test-button" onclick="testTemplate('html')">HTML</button>
            <button class="test-button" onclick="testTemplate('css')">CSS</button>
            <button class="test-button" onclick="testTemplate('react')">React</button>
            
            <div id="template-results" class="results"></div>
        </div>
        
        <!-- Test Comandi Slash -->
        <div class="test-section">
            <h2>‚ö° Test Comandi Slash</h2>
            <input type="text" class="command-input" id="slash-command" placeholder="Digita un comando (es: /help, /template js, /analyze)" value="/help">
            
            <button class="test-button" onclick="testSlashCommand()">Esegui Comando</button>
            <button class="test-button" onclick="testSlashCommand('/template java')">Template Java</button>
            <button class="test-button" onclick="testSlashCommand('/best javascript')">Best Practices JS</button>
            
            <div id="slash-results" class="results"></div>
        </div>
        
        <!-- Test Code Blocks -->
        <div class="test-section">
            <h2>üé® Test Formattazione Code Blocks</h2>
            <p>Preview della formattazione del codice:</p>
            
            <button class="test-button" onclick="testCodeFormatting('javascript')">Test JavaScript</button>
            <button class="test-button" onclick="testCodeFormatting('python')">Test Python</button>
            <button class="test-button" onclick="testCodeFormatting('java')">Test Java</button>
            <button class="test-button" onclick="testCodeFormatting('mixed')">Test Misto</button>
            
            <div class="preview-area" id="code-preview">
                <p>I code blocks appariranno qui con la formattazione corretta...</p>
            </div>
        </div>
        
        <!-- Test Syntax Highlighting -->
        <div class="test-section">
            <h2>üåà Test Syntax Highlighting</h2>
            <textarea class="command-input" id="custom-code" rows="10" placeholder="Incolla qui il tuo codice per testare il syntax highlighting...">
// Esempio JavaScript
const greeting = "Hello World!";
function sayHello(name) {
    return `Hello, ${name}!`;
}
console.log(sayHello("Developer"));
            </textarea>
            
            <select class="command-input" id="code-language" style="width: auto; display: inline-block; margin-right: 10px;">
                <option value="javascript">JavaScript</option>
                <option value="python">Python</option>
                <option value="java">Java</option>
                <option value="html">HTML</option>
                <option value="css">CSS</option>
            </select>
            
            <button class="test-button" onclick="testCustomCode()">Applica Highlighting</button>
            
            <div id="custom-results" class="results"></div>
        </div>
        
        <!-- Debug Area -->
        <div class="test-section">
            <h2>üêõ Debug Info</h2>
            <div id="debug-info" class="results" style="font-size: 12px; font-family: monospace;"></div>
        </div>
    </div>

    <!-- Include i file necessari -->
    <script src="config.js"></script>
    <script src="script.js"></script>
    
    <script>
        // Variabili globali per test
        let testVF = null;
        
        // Inizializzazione
        document.addEventListener('DOMContentLoaded', function() {
            log('üöÄ Inizializzazione test modalit√† programmatore...');
            
            try {
                // Crea istanza temporanea per test
                testVF = new VirtualFriend();
                testVF.currentCategory = 'programmatore'; // Forza modalit√† programmatore
                
                log('‚úÖ Test VirtualFriend creato con successo');
                log(`üìÇ Modalit√† corrente: ${testVF.currentCategory}`);
                
                // Rendi disponibile globalmente per i callback
                window.testVF = testVF;
                
            } catch (error) {
                log(`‚ùå Errore creazione test VF: ${error.message}`);
            }
        });
        
        // Test template
        function testTemplate(language) {
            log(`üéØ Test template: ${language}`);
            
            try {
                const result = testVF.getCodeTemplate(language);
                const formatted = testVF.formatProgrammerMessage(result);
                
                document.getElementById('template-results').innerHTML = formatted;
                log(`‚úÖ Template ${language} generato con successo`);
                
            } catch (error) {
                log(`‚ùå Errore template ${language}: ${error.message}`);
            }
        }
        
        // Test comandi slash
        function testSlashCommand(customCommand = null) {
            const command = customCommand || document.getElementById('slash-command').value;
            log(`‚ö° Test comando slash: ${command}`);
            
            try {
                let result = '';
                
                if (command === '/help') {
                    result = testVF.getSlashHelp();
                } else if (command.startsWith('/template ')) {
                    const lang = command.split(' ')[1];
                    result = testVF.getCodeTemplate(lang);
                } else if (command.startsWith('/best ')) {
                    const lang = command.split(' ')[1];
                    result = testVF.getBestPractices(lang);
                } else if (command.startsWith('/resources ')) {
                    const lang = command.split(' ')[1];
                    result = testVF.getResources(lang);
                } else {
                    result = `‚ùå Comando non riconosciuto: ${command}\n\nUsa /help per vedere tutti i comandi disponibili.`;
                }
                
                const formatted = testVF.formatProgrammerMessage(result);
                document.getElementById('slash-results').innerHTML = formatted;
                log(`‚úÖ Comando eseguito con successo`);
                
            } catch (error) {
                log(`‚ùå Errore comando slash: ${error.message}`);
                document.getElementById('slash-results').innerHTML = `<p style="color: #e74c3c;">Errore: ${error.message}</p>`;
            }
        }
        
        // Test formattazione code blocks
        function testCodeFormatting(type) {
            log(`üé® Test formattazione: ${type}`);
            
            let testMessage = '';
            
            switch (type) {
                case 'javascript':
                    testMessage = `Ecco un esempio di **JavaScript**:

\`\`\`javascript
// Funzione per calcolare factorial
function factorial(n) {
    if (n <= 1) return 1;
    return n * factorial(n - 1);
}

const result = factorial(5);
console.log("Factorial di 5:", result);
\`\`\`

Puoi anche usare codice inline come \`const x = 10;\` per esempi veloci.`;
                    break;

                case 'python':
                    testMessage = `Ecco un esempio di **Python**:

\`\`\`python
# Classe per gestire una lista di numeri
class NumberList:
    def __init__(self):
        self.numbers = []
    
    def add_number(self, num):
        self.numbers.append(num)
    
    def get_average(self):
        if not self.numbers:
            return 0
        return sum(self.numbers) / len(self.numbers)

# Uso della classe
nl = NumberList()
nl.add_number(10)
nl.add_number(20)
print(f"Media: {nl.get_average()}")
\`\`\``;
                    break;

                case 'java':
                    testMessage = `Ecco un esempio di **Java**:

\`\`\`java
public class Calculator {
    private double result;
    
    public Calculator() {
        this.result = 0.0;
    }
    
    public double add(double a, double b) {
        result = a + b;
        return result;
    }
    
    public double getResult() {
        return result;
    }
    
    public static void main(String[] args) {
        Calculator calc = new Calculator();
        double sum = calc.add(15.5, 20.3);
        System.out.println("Risultato: " + sum);
    }
}
\`\`\``;
                    break;

                case 'mixed':
                    testMessage = `Esempio con **multipli linguaggi**:

**HTML:**
\`\`\`html
<div class="container">
    <h1>Hello World</h1>
    <button onclick="sayHello()">Click me!</button>
</div>
\`\`\`

**CSS:**
\`\`\`css
.container {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
}

button {
    background: #007bff;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
}
\`\`\`

**JavaScript:**
\`\`\`javascript
function sayHello() {
    alert("Hello from JavaScript!");
}
\`\`\`

E codice inline: \`document.getElementById('test')\``;
                    break;
            }
            
            try {
                const formatted = testVF.formatProgrammerMessage(testMessage);
                document.getElementById('code-preview').innerHTML = formatted;
                log(`‚úÖ Formattazione ${type} completata`);
                
            } catch (error) {
                log(`‚ùå Errore formattazione ${type}: ${error.message}`);
            }
        }
        
        // Test codice personalizzato
        function testCustomCode() {
            const code = document.getElementById('custom-code').value;
            const language = document.getElementById('code-language').value;
            
            log(`üåà Test syntax highlighting: ${language}`);
            
            try {
                const testMessage = `**Test Syntax Highlighting - ${testVF.getLanguageDisplayName(language)}:**

\`\`\`${language}
${code}
\`\`\``;
                
                const formatted = testVF.formatProgrammerMessage(testMessage);
                document.getElementById('custom-results').innerHTML = formatted;
                log(`‚úÖ Syntax highlighting applicato con successo`);
                
            } catch (error) {
                log(`‚ùå Errore syntax highlighting: ${error.message}`);
            }
        }
        
        // Utility per logging
        function log(message) {
            const debugDiv = document.getElementById('debug-info');
            const timestamp = new Date().toLocaleTimeString('it-IT');
            const logEntry = `[${timestamp}] ${message}\n`;
            
            debugDiv.textContent += logEntry;
            debugDiv.scrollTop = debugDiv.scrollHeight;
            
            console.log(message);
        }
          // Test automatico all'avvio con esempio Python
        setTimeout(() => {
            if (testVF) {
                log('üéØ Esecuzione test automatico...');
                testTemplate('python');
                
                // Test anche un esempio specifico come nell'immagine
                setTimeout(() => {
                    testSpecificPythonExample();
                }, 2000);
            }
        }, 1000);
        
        // Test esempio Python specifico come nell'immagine
        function testSpecificPythonExample() {
            log('üêç Test esempio Python specifico (somma due numeri)');
            
            const pythonCode = `# Input
num1 = float(input("Inserisci il primo numero: "))
num2 = float(input("Inserisci il secondo numero: "))

# Somma
somma = num1 + num2

# Output
print("La somma √®:", somma)`;
            
            const message = `Ecco un semplice programma che riceve in input due numeri e restituisce la loro somma, scritto in diversi linguaggi di programmazione:

\`\`\`python
${pythonCode}
\`\`\``;
            
            try {
                const formatted = testVF.formatProgrammerMessage(message);
                
                // Crea una sezione speciale per questo esempio
                const exampleSection = document.createElement('div');
                exampleSection.className = 'test-section';
                exampleSection.innerHTML = `
                    <h2>üêç Esempio Specifico - Somma Due Numeri</h2>
                    <p>Replica esatta dell'esempio nell'immagine fornita:</p>
                    <div class="preview-area">${formatted}</div>
                `;
                
                document.querySelector('.container').appendChild(exampleSection);
                log('‚úÖ Esempio Python specifico generato con successo');
                
            } catch (error) {
                log(`‚ùå Errore esempio Python: ${error.message}`);
            }
        }
    </script>
</body>
</html>
